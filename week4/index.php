<!DOCTYPE html>
<html>
<head>
	
	<title>
		test 
	</title>
</head>
<body>
<script>
(async() => {

  const requestModule = ({url, dataURL = true}) => 
    new Promise((resolve, reject) => {
      const request = new XMLHttpRequest();
      const reader = new FileReader();
      reader.onload = () => { resolve(reader.result) };
      request.open("GET", url);
      request.responseType = "blob";
      request.onload = () => { reader[dataURL ? "readAsDataURL" : "readAsText"](request.response) };
      request.send();
   })
  
  let moduleName = `box`;
  // get `Mod` module
  let moduleRequest = await requestModule({url:"box.js"});

  // do stuff with `Mod`; e.g., `console.log(Mod)`
  let scriptModule = `import ${moduleName} from "${moduleRequest}"`;
  let script = document.createElement("script");
  script.type = "module";
  script.textContent = scriptModule;
  document.body.appendChild(script);
 console.log(script);
})();
</script>
<script type="module" >
	import {Runtime, Inspector} from "https://cdn.jsdelivr.net/npm/@observablehq/runtime@4/dist/runtime.js";
	// import box from "./example.js";
	// import box from "./box.js";
	import box from "data:application/javascript;base64,Ly8gaHR0cHM6Ly9vYnNlcnZhYmxlaHEuY29tL0BkMy9ib3gtcGxvdEAxOTUNCmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRlZmluZShydW50aW1lLCBvYnNlcnZlcikgew0KICAgIGNvbnN0IG1haW4gPSBydW50aW1lLm1vZHVsZSgpOw0KICAgIG1haW4udmFyaWFibGUob2JzZXJ2ZXIoKSkuZGVmaW5lKFsibWQiXSwgZnVuY3Rpb24gKG1kKSB7DQogICAgICAgIHJldHVybiAoDQogICAgICAgICAgICBtZCBgIyBCb3ggUGxvdA0KDQpBIGJveC1hbmQtd2hpc2tlciBwbG90IHNob3dzIHN1bW1hcnkgc3RhdGlzdGljcyBvZiBhIHF1YW50aXRhdGl2ZSBkaXN0cmlidXRpb24uIEhlcmUsIGNsb3NlIHByaWNlIGRpc3RyaWJ1dGlvbiAgKCp5Ki1heGlzKSBmb3IgdGhlIHN0b2NrIG9mIEFtZXJpY2FuIEFjYWRlbXkgb2YgTmV1cm9sb2d5KEFBTikgaW4gMTUgeWVhcnMgaXMgcGxvdHRlZCBmcm9tMjAwNCB0byAyMDE5ICgqeCotYXhpcykuYA0KICAgICAgICApDQogICAgfSk7DQogICAgbWFpbi52YXJpYWJsZShvYnNlcnZlcigiY2hhcnQiKSkuZGVmaW5lKCJjaGFydCIsIFsiZDMiLCAiRE9NIiwgIndpZHRoIiwgImhlaWdodCIsICJiaW5zIiwgIngiLCAieSIsICJ4QXhpcyIsDQogICAgICAgICJ5QXhpcyJdLCBmdW5jdGlvbiAoZDMsIERPTSwgd2lkdGgsIGhlaWdodCwgYmlucywgeCwgeSwgeEF4aXMsIHlBeGlzKSB7DQogICAgICAgIGNvbnN0IHN2ZyA9IGQzLnNlbGVjdChET00uc3ZnKHdpZHRoLCBoZWlnaHQpKTsNCg0KICAgICAgICBjb25zdCBnID0gc3ZnLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuc2VsZWN0QWxsKCJnIikNCiAgICAgICAgICAgIC5kYXRhKGJpbnMpDQogICAgICAgICAgICAuam9pbigiZyIpOw0KDQogICAgICAgIGcuYXBwZW5kKCJwYXRoIikNCiAgICAgICAgICAgIC5hdHRyKCJzdHJva2UiLCAiY3VycmVudENvbG9yIikNCiAgICAgICAgICAgIC5hdHRyKCJkIiwgZCA9Pg0KICAgICAgICAgICAgICAgIGANCiAgICAgICAgTSR7eCgoZC54MCArIGQueDEpIC8gMil9LCR7eShkLnJhbmdlWzFdKX0NCiAgICAgICAgViR7eShkLnJhbmdlWzBdKX0NCiAgICAgIGApOw0KDQogICAgICAgIGcuYXBwZW5kKCJwYXRoIikNCiAgICAgICAgICAgIC5hdHRyKCJmaWxsIiwgIiNkZGQiKQ0KICAgICAgICAgICAgLmF0dHIoImQiLCBkID0+DQogICAgICAgICAgICAgICAgYA0KICAgICAgICBNJHt4KGQueDApICsgMX0sJHt5KGQucXVhcnRpbGVzWzJdKX0NCiAgICAgICAgSCR7eChkLngxKX0NCiAgICAgICAgViR7eShkLnF1YXJ0aWxlc1swXSl9DQogICAgICAgIEgke3goZC54MCkgKyAxfQ0KICAgICAgICBaDQogICAgICBgDQogICAgICAgICAgICApOw0KDQogICAgICAgIGcuYXBwZW5kKCJwYXRoIikNCiAgICAgICAgICAgIC5hdHRyKCJzdHJva2UiLCAiY3VycmVudENvbG9yIikNCiAgICAgICAgICAgIC5hdHRyKCJzdHJva2Utd2lkdGgiLCAyKQ0KICAgICAgICAgICAgLmF0dHIoImQiLCBkID0+IGANCiAgICAgICAgTSR7eChkLngwKSArIDF9LCR7eShkLnF1YXJ0aWxlc1sxXSl9DQogICAgICAgIEgke3goZC54MSl9DQogICAgICBgKTsNCg0KICAgICAgICBnLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuYXR0cigiZmlsbCIsICJjdXJyZW50Q29sb3IiKQ0KICAgICAgICAgICAgLmF0dHIoImZpbGwtb3BhY2l0eSIsIDAuMikNCiAgICAgICAgICAgIC5hdHRyKCJzdHJva2UiLCAibm9uZSIpDQogICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgZCA9PiBgdHJhbnNsYXRlKCR7eCgoZC54MCArIGQueDEpIC8gMil9LDApYCkNCiAgICAgICAgICAgIC5zZWxlY3RBbGwoImNpcmNsZSIpDQogICAgICAgICAgICAuZGF0YShkID0+IGQub3V0bGllcnMpDQogICAgICAgICAgICAuam9pbigiY2lyY2xlIikNCiAgICAgICAgICAgIC5hdHRyKCJyIiwgMikNCiAgICAgICAgICAgIC5hdHRyKCJjeCIsICgpID0+IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDQpDQogICAgICAgICAgICAuYXR0cigiY3kiLCBkID0+IHkoZC55KSk7DQoNCiAgICAgICAgc3ZnLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuY2FsbCh4QXhpcyk7DQoNCiAgICAgICAgc3ZnLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuY2FsbCh5QXhpcyk7DQoNCiAgICAgICAgcmV0dXJuIHN2Zy5ub2RlKCk7DQogICAgfSk7DQogICAgbWFpbi52YXJpYWJsZShvYnNlcnZlcigiYmlucyIpKS5kZWZpbmUoImJpbnMiLCBbImQzIiwgIm4iLCAiZGF0YSJdLCBmdW5jdGlvbiAoZDMsIG4sIGRhdGEpIHsNCiAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAgIGQzLmhpc3RvZ3JhbSgpDQogICAgICAgICAgICAudGhyZXNob2xkcyhuKQ0KICAgICAgICAgICAgLnZhbHVlKGQgPT4gZC54KQ0KICAgICAgICAgICAgKGRhdGEpDQogICAgICAgICAgICAubWFwKGJpbiA9PiB7DQogICAgICAgICAgICAgICAgYmluLnNvcnQoKGEsIGIpID0+IGEueSAtIGIueSk7DQogICAgICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gYmluLm1hcChkID0+IGQueSk7DQogICAgICAgICAgICAgICAgY29uc3QgbWluID0gdmFsdWVzWzBdOw0KICAgICAgICAgICAgICAgIGNvbnN0IG1heCA9IHZhbHVlc1t2YWx1ZXMubGVuZ3RoIC0gMV07DQogICAgICAgICAgICAgICAgY29uc3QgcTEgPSBkMy5xdWFudGlsZSh2YWx1ZXMsIDAuMjUpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHEyID0gZDMucXVhbnRpbGUodmFsdWVzLCAwLjUwKTsNCiAgICAgICAgICAgICAgICBjb25zdCBxMyA9IGQzLnF1YW50aWxlKHZhbHVlcywgMC43NSk7DQogICAgICAgICAgICAgICAgY29uc3QgaXFyID0gcTMgLSBxMTsgLy8gaW50ZXJxdWFydGlsZSByYW5nZQ0KICAgICAgICAgICAgICAgIGNvbnN0IHIwID0gTWF0aC5tYXgobWluLCBxMSAtIGlxciAqIDEuNSk7DQogICAgICAgICAgICAgICAgY29uc3QgcjEgPSBNYXRoLm1pbihtYXgsIHEzICsgaXFyICogMS41KTsNCiAgICAgICAgICAgICAgICBiaW4ucXVhcnRpbGVzID0gW3ExLCBxMiwgcTNdOw0KICAgICAgICAgICAgICAgIGJpbi5yYW5nZSA9IFtyMCwgcjFdOw0KICAgICAgICAgICAgICAgIGJpbi5vdXRsaWVycyA9IGJpbi5maWx0ZXIodiA9PiB2LnkgPCByMCB8fCB2LnkgPiByMSk7IC8vIFRPRE8NCiAgICAgICAgICAgICAgICByZXR1cm4gYmluOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgKQ0KICAgIH0pOw0KICAgIG1haW4udmFyaWFibGUob2JzZXJ2ZXIoInBhcnNlciIpKS5kZWZpbmUoInBhcnNlciIsIFsiZDMiXSwgZnVuY3Rpb24gKGQzKSB7DQogICAgICAgIHJldHVybiAoDQogICAgICAgICAgICBkMy50aW1lUGFyc2UoIiVZLSVtLSVkIikNCiAgICAgICAgKQ0KICAgIH0pOw0KICAgIA0KICAgIG1haW4udmFyaWFibGUob2JzZXJ2ZXIoInBhcnNlVGltZSIpKS5kZWZpbmUoInBhcnNlVGltZSIsIFsiZDMiXSwgZnVuY3Rpb24gKGQzKSB7DQogICAgICAgIHJldHVybiAoDQogICAgICAgICAgICBkMy5pc29QYXJzZQ0KICAgICAgICApDQogICAgfSk7DQogICAgbWFpbi52YXJpYWJsZShvYnNlcnZlcigiZGF0YSIpKS5kZWZpbmUoImRhdGEiLCBbImQzIiwgInBhcnNlciIsInZhbHVlT2YiLCAicGFyc2VUaW1lIl0sIGZ1bmN0aW9uIChkMywgcGFyc2VyLCB2YWx1ZU9mLCBwYXJzZVRpbWUpIHsNCiAgICAgICAgLy8gZC5kYXRlID0gcGFyc2VEYXRlKGQuZGF0ZSk7DQogICAgICAgIHJldHVybiAoDQogICAgICAgICAgICBkMy5jc3YoDQogICAgICAgICAgICAgICAgImh0dHBzOi8vYXBpLnVuaWJpdC5haS9hcGkvaGlzdG9yaWNhbHN0b2NrcHJpY2UvQUFOP3JhbmdlPTEweSZpbnRlcnZhbD0xJmRhdGF0eXBlPWNzdiZBY2Nlc3NLZXk9NzNHSGRTaTlHWHp5Q0RqNHFoa3lwbkJObjZUaEZ6QmsiLA0KICAgICAgICAgICAgICAgIC8vICJoaXN0b3JpY2FscHJpY2VfQUFOXzEweV8xLmNzdiIsDQogICAgICAgICAgICAgICAgKHsNCiAgICAgICAgICAgICAgICAgICBkYXRlLA0KICAgICAgICAgICAgICAgICAgICBjbG9zZQ0KICAgICAgICAgICAgICAgIH0pID0+ICh7DQogICAgICAgICAgICAgICAgICAgIC8vIHg6IGRhdGUsDQogICAgICAgICAgICAgICAgICAgIHg6IHBhcnNlcihkYXRlKS5nZXRGdWxsWWVhcigpLA0KICAgICAgICAgICAgICAgICAgICB5OiArY2xvc2UNCiAgICAgICAgICAgICAgICB9KSkNCiAgICAgICAgKQ0KICAgIH0pOw0KICAgIG1haW4udmFyaWFibGUob2JzZXJ2ZXIoIngiKSkuZGVmaW5lKCJ4IiwgWyJkMyIsICJiaW5zIiwgIm1hcmdpbiIsICJ3aWR0aCJdLCBmdW5jdGlvbiAoZDMsIGJpbnMsIG1hcmdpbiwgd2lkdGgpIHsNCiAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAgIGQzLnNjYWxlTGluZWFyKCkNCiAgICAgICAgICAgIC5kb21haW4oW2QzLm1pbihiaW5zLCBkID0+IGQueDApLCBkMy5tYXgoYmlucywgZCA9PiBkLngxKV0pDQogICAgICAgICAgICAucmFuZ2VSb3VuZChbbWFyZ2luLmxlZnQsIHdpZHRoIC0gbWFyZ2luLnJpZ2h0XSkNCiAgICAgICAgKQ0KICAgIH0pOw0KICAgIG1haW4udmFyaWFibGUob2JzZXJ2ZXIoInkiKSkuZGVmaW5lKCJ5IiwgWyJkMyIsICJiaW5zIiwgImhlaWdodCIsICJtYXJnaW4iXSwgZnVuY3Rpb24gKGQzLCBiaW5zLCBoZWlnaHQsIG1hcmdpbikgew0KICAgICAgICByZXR1cm4gKA0KICAgICAgICAgICAgZDMuc2NhbGVMaW5lYXIoKQ0KICAgICAgICAgICAgLmRvbWFpbihbZDMubWluKGJpbnMsIGQgPT4gZC5yYW5nZVswXSksIGQzLm1heChiaW5zLCBkID0+IGQucmFuZ2VbMV0pXSkubmljZSgpDQogICAgICAgICAgICAucmFuZ2UoW2hlaWdodCAtIG1hcmdpbi5ib3R0b20sIG1hcmdpbi50b3BdKQ0KICAgICAgICApDQogICAgfSk7DQogICAgbWFpbi52YXJpYWJsZShvYnNlcnZlcigieEF4aXMiKSkuZGVmaW5lKCJ4QXhpcyIsIFsiaGVpZ2h0IiwgIm1hcmdpbiIsICJkMyIsICJ4IiwgIm4iXSwgZnVuY3Rpb24gKGhlaWdodCwgbWFyZ2luLCBkMywNCiAgICAgICAgeCwgbikgew0KICAgICAgICByZXR1cm4gKA0KICAgICAgICAgICAgZyA9PiBnDQogICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgYHRyYW5zbGF0ZSgwLCR7aGVpZ2h0IC0gbWFyZ2luLmJvdHRvbX0pYCkNCiAgICAgICAgICAgIC5jYWxsKGQzLmF4aXNCb3R0b20oeCkudGlja3MobikudGlja1NpemVPdXRlcigwKSkNCiAgICAgICAgKQ0KICAgIH0pOw0KICAgIG1haW4udmFyaWFibGUob2JzZXJ2ZXIoInlBeGlzIikpLmRlZmluZSgieUF4aXMiLCBbIm1hcmdpbiIsICJkMyIsICJ5Il0sIGZ1bmN0aW9uIChtYXJnaW4sIGQzLCB5KSB7DQogICAgICAgIHJldHVybiAoDQogICAgICAgICAgICBnID0+IGcNCiAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCBgdHJhbnNsYXRlKCR7bWFyZ2luLmxlZnR9LDApYCkNCiAgICAgICAgICAgIC5jYWxsKGQzLmF4aXNMZWZ0KHkpLnRpY2tzKG51bGwsICJzIikpDQogICAgICAgICAgICAuY2FsbChnID0+IGcuc2VsZWN0KCIuZG9tYWluIikucmVtb3ZlKCkpDQogICAgICAgICkNCiAgICB9KTsNCiAgICBtYWluLnZhcmlhYmxlKG9ic2VydmVyKCJuIikpLmRlZmluZSgibiIsIFsid2lkdGgiXSwgZnVuY3Rpb24gKHdpZHRoKSB7DQogICAgICAgIHJldHVybiAoDQogICAgICAgICAgICAxMw0KICAgICAgICApDQogICAgfSk7DQogICAgbWFpbi52YXJpYWJsZShvYnNlcnZlcigiaGVpZ2h0IikpLmRlZmluZSgiaGVpZ2h0IiwgZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4gKA0KICAgICAgICAgICAgNjAwDQogICAgICAgICkNCiAgICB9KTsNCiAgICBtYWluLnZhcmlhYmxlKG9ic2VydmVyKCJtYXJnaW4iKSkuZGVmaW5lKCJtYXJnaW4iLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiAoew0KICAgICAgICAgICAgdG9wOiAyMCwNCiAgICAgICAgICAgIHJpZ2h0OiAyMCwNCiAgICAgICAgICAgIGJvdHRvbTogMzAsDQogICAgICAgICAgICBsZWZ0OiA0MA0KICAgICAgICB9KQ0KICAgIH0pOw0KICAgIG1haW4udmFyaWFibGUob2JzZXJ2ZXIoImQzIikpLmRlZmluZSgiZDMiLCBbInJlcXVpcmUiXSwgZnVuY3Rpb24gKHJlcXVpcmUpIHsNCiAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAgIHJlcXVpcmUoImQzQDUiKQ0KICAgICAgICApDQogICAgfSk7DQogICAgcmV0dXJuIG1haW47DQp9";
	new Runtime().module(box, Inspector.into(document.body));
    // import define from "./box.js";
    // new runtime.module();
    // console.log(d.date);
    // window.onload=function(){
    // return main;}
</script>

</body>
</html>


